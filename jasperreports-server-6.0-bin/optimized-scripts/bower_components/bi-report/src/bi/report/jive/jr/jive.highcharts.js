define(["require","jquery","bundle!adhoc_messages","highcharts-more","logger","heatmap"],function(e,n,t,i,r,h){var a={changeType:{}},c=(r.register("jive.highcharts"),function(e){this.rdy=new n.Deferred,this.config=e,this.parent=null,this.loader=null,this.api=a,this.highchartsInstance=null,this.events={ACTION_PERFORMED:"action",HYPERLINK_INTERACTION:"hyperlinkInteraction"},this._init()});return c.prototype={changeType:function(e){var n=this,t={action:{actionName:"changeChartType",changeChartTypeData:{chartComponentUuid:n.config.id,chartType:e.type}}};return this.loader.runAction(t).then(function(e){return n._notify({name:n.events.ACTION_PERFORMED,type:"changeChartType",data:e}),n})},render:function(e){var i,r=this;r.rdy.then(function(){try{r.hcConfig.chart.renderTo=n("#"+r.hcConfig.chart.renderTo,e)[0],r.highchartsInstance=new h.Chart(r.hcConfig)}catch(a){i=/\#19/.test(a)?t.ADH_1214_ICHARTS_ERROR_TOO_MANY_VALUES:t.ADH_1214_ICHARTS_ERROR_UNCAUGHT,_.each(h.charts,function(e){e&&r.hcConfig.chart.renderTo===e.renderTo&&e.destroy()}),r.highchartsInstance&&r.highchartsInstance.destroy&&(r.highchartsInstance.destroy(),r.highchartsInstance=void 0),r._notify({name:"error",type:"highchartsInternalError",data:{error:a,message:i}})}})},_init:function(){var t=this,i=this.config.hcinstancedata;this.config.globalOptions&&h.setOptions(this.config.globalOptions),t.hcConfig={};var r=new n.Deferred;r.resolve(),n.each(this.config.hcinstancedata.services,function(i,h){var a=h.service,c=h.data;"dataSettingService"===a?t.hcConfig=c:r=r.then(function(){var i=new n.Deferred;return e(["../jr/"+a],function(e){if("itemHyperlinkSettingService"===a){var n=_.extend({},c,{linkOptions:t.config.linkOptions}),r=new e(t,t.hcConfig,n);r.hyperlinkSeriesPointClickedHandler=t._hyperlinkSeriesPointClicked,r.perform()}else e.perform(t.hcConfig,c);i.resolve()}),i})}),r.then(function(){t.hcConfig.chart.renderTo=i.renderto,t.hcConfig.chart.width=i.width,t.hcConfig.chart.height=i.height,t.rdy.resolve()})},_hyperlinkSeriesPointClicked:function(e){this._notify({name:this.events.HYPERLINK_INTERACTION,type:"hyperlinkClicked",data:e})},_notify:function(e){this.parent&&this.parent._notify(e)}},c});